apiVersion: v1
kind: ConfigMap
metadata:
  name: network-ad-smb-config
  namespace: core-auth
  labels:
    app.kubernetes.io/name: network-ad
    app.kubernetes.io/component: samba-ad-dc
    app.kubernetes.io/part-of: core-services
data:
  smb.conf: |
    [global]
    # Network AD Domain Configuration (Infrastructure Only)
    netbios name = NETWORK-AD-DC
    realm = NETWORK-AD.ZSEL.OPOLE.PL
    workgroup = NETWORK-AD
    server role = active directory domain controller
    server services = s3fs, rpc, nbt, wrepl, ldap, cldap, kdc, drepl, winbindd, ntp_signd, kcc, dnsupdate
    idmap_ldb:use rfc2307 = yes
    
    # DNS Configuration
    dns forwarder = 1.1.1.1 9.9.9.9
    dns backend = SAMBA_INTERNAL
    allow dns updates = nonsecure and secure
    
    # LDAP Configuration for RADIUS Integration
    ldap server require strong auth = no
    ldap ssl = off
    
    # Logging
    log level = 2
    log file = /var/log/samba/samba.log
    max log size = 10000
    
    # Performance Tuning
    socket options = TCP_NODELAY IPTOS_LOWDELAY
    read raw = yes
    write raw = yes
    max xmit = 65535
    
    [netlogon]
    path = /var/lib/samba/sysvol/network-ad.zsel.opole.pl/scripts
    read only = No
    
    [sysvol]
    path = /var/lib/samba/sysvol
    read only = No
